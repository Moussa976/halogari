{% extends 'base.html.twig' %}

{% block title %}Mes notifications
{% endblock %}

{% block stylesheets %}
	<style>
		.notifications-scroll {
			max-height: 500px;
			overflow-y: auto;
		}
		.notifications-scroll::-webkit-scrollbar {
			width: 8px;
		}
		.notifications-scroll::-webkit-scrollbar-thumb {
			background-color: #ccc;
			border-radius: 10px;
		}
	</style>
{% endblock %}

{% block body %}
	<div class="container py-5">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<h2 class="mb-4">ðŸ”” Mes notifications</h2>

				{% if notifications is empty %}
					<div class="alert alert-info">Aucune notification pour lâ€™instant.</div>
				{% else %}
					<div class="notifications-scroll border rounded shadow-sm p-2 bg-white">
						<ul class="list-group list-group-item-action list-group-flush">
							{% for notif in notifications %}
								<li class="list-group-item d-flex justify-content-between align-items-start {{ not notif.lu ? 'bg-light' : '' }}">
									<div class="d-flex">
										{% if notif.type == 'message' %}
											<i class="bi bi-envelope-fill me-3 text-primary fs-5"></i>
										{% elseif notif.type == 'reservation' %}
											<i class="bi bi-calendar-check-fill me-3 text-success fs-5"></i>
										{% elseif notif.type == 'annulation' %}
											<i class="bi bi-x-circle-fill me-3 text-danger fs-5"></i>
										{% elseif notif.type == 'paiement' %}
											<i class="bi bi-credit-card-2-front-fill me-3 text-warning fs-5"></i>
										{% else %}
											<i class="bi bi-info-circle-fill me-3 text-muted fs-5"></i>
										{% endif %}
										<div>
											<strong>{{ notif.titre }}</strong><br>
											<small class="text-muted">{{ notif.createdAt|date_conversation }}</small><br>
											{{ notif.contenu }}
										</div>
									</div>

									{% if notif.lien %}
										<div class="ms-auto">
                                        {{ not notif.lu ? '<i class="bi bi-circle-fill me-3 text-orange fs-5" title="Non lue"></i>' : '' }}
											<a href="{{ path('notification_voir', { id: notif.id }) }}" class="btn btn-sm btn-outline-primary">Voir</a>
										</div>
									{% endif %}
								</li>

							{% endfor %}
						</ul>
					</div>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
