{# === 1. SCRIPTS EXTERNES === #}
<!-- Librairies JavaScript principales -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"> </script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.21.0/dist/sweetalert2.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/fr.js"></script>

{# === 2. FORMULAIRES & UI === #}
<script src="{{ asset('js/form-villages.js') }}"></script>
<script src="{{ asset('js/form-validation.js') }}"></script>
<script src="{{ asset('js/datepicker-init.js') }}"></script>

{# === 3. SERVICE WORKER REGISTRATION === #}
<script src="{{ asset('js/sw-register.js') }}"></script>

{# === 4. INSTALLATION PWA (Android uniquement via beforeinstallprompt) === #}
<script src="{{ asset('js/push-permission.js') }}"></script>
<script src="{{ asset('js/pwa-install.js') }}"></script>

{# === 5. MESSAGERIE, SPLASH SCREEN & NOTIFICATION JS === #}
<script src="{{ asset('js/message-check.js') }}"></script>
<script>
{% if app.user is not null %}
  document.addEventListener("DOMContentLoaded", () => {
    checkNewMessages();
    checkNotifications();
    setInterval(checkNewMessages, 3000);
    setInterval(checkNotifications, 3000);
  });
{% endif %}
</script>
<script src="{{ asset('js/splash-screen.js') }}"></script>

{# === 6. NOTIFICATIONS PUSH (fichier compilé séparé) === #}
<script src="{{ path('js_push_notif') }}"></script>


{# === 7. Voir le mot passe === #}
<script src="{{ asset('js/toggle-password.js') }}"></script>